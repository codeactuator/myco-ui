steps:
  # Step 1: Build the container image and tag it for Artifact Registry
  - name: 'gcr.io/cloud-builders/docker'
    args:
      - "build"
      - "--build-arg"
      - "REACT_APP_API_BASE_URL=${_API_URL}"
      - "-t"
      - "us-central1-docker.pkg.dev/myco-ui-478310/myco-repo/myco-ui:latest"
      - "."
      
  # Step 2: Push the image to Artifact Registry
  - name: 'gcr.io/cloud-builders/docker'
    args:
      - "push"
      - "us-central1-docker.pkg.dev/myco-ui-478310/myco-repo/myco-ui:latest"

substitutions:
  # A value MUST be provided for this variable during a real cloud deployment.
  _API_URL: "http://104.199.184.174:8080/api"
